# ุญูุงูุฉ ุจูุงูุงุช ุงูุทูุงุจ - Student Data Protection

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุดุงูู ูุญูุงูุฉ ุจูุงูุงุช ุงูู 703 ุทุงูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจุดูู ูุงูู ููุง ูููู ุงููุตูู ุฅูููุง ุฃู ุชุนุฏูููุง ุฅูุง ูู ูุจู Admin ููุท.

---

## ๐ ุงูุญูุงูุฉ ุงููุทุจูุฉ

### 1. Row Level Security (RLS) Policies

ุชู ุชูุนูู RLS ุนูู ุฌุฏูู `verification_list` ูุญูุงูุฉ ุงูุจูุงูุงุช:

#### โ ุนุฑุถ ุงูุจูุงูุงุช (SELECT)
- **ุงูุณูุงุณุฉ:** `Admins can view verification list`
- **ุงููุตูู:** Admin ููุท
- **ุงูุดุฑุท:** ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู Admin ู `is_active = TRUE`

#### โ ุฅุถุงูุฉ ุงูุจูุงูุงุช (INSERT)
- **ุงูุณูุงุณุฉ:** `Admins can insert verification list`
- **ุงููุตูู:** Admin ููุท
- **ุงูุดุฑุท:** ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู Admin ู `is_active = TRUE`

#### โ ุชุนุฏูู ุงูุจูุงูุงุช (UPDATE)
- **ุงูุณูุงุณุฉ:** `Admins can update verification list`
- **ุงููุตูู:** Admin ููุท
- **ุงูุดุฑุท:** ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู Admin ู `is_active = TRUE`

#### โ ุญุฐู ุงูุจูุงูุงุช (DELETE)
- **ุงูุณูุงุณุฉ:** `No direct deletes verification`
- **ุงููุตูู:** ูุญุธูุฑ ุชูุงูุงู
- **ุงูุณุจุจ:** ููุน ุงูุญุฐู ุงููุจุงุดุฑ ูุญูุงูุฉ ุงูุจูุงูุงุช

---

## ๐ก๏ธ ุญูุงูุฉ API Endpoints

### 1. `/api/admin/verification/list` (GET)
- **ุงููุตู:** ุนุฑุถ ุฌููุน ุงูุทูุงุจ ูู ูุงุฆูุฉ ุงูุชุญูู
- **ุงูุญูุงูุฉ:**
  - โ ูุชุทูุจ JWT Token
  - โ ูุชุทูุจ `role = 'admin'`
  - โ Rate Limiting (30 ุทูุจ/ุฏูููุฉ)
  - โ Server-side verification

### 2. `/api/admin/verification/update` (PUT)
- **ุงููุตู:** ุชุนุฏูู ุจูุงูุงุช ุทุงูุจ
- **ุงูุญูุงูุฉ:**
  - โ ูุชุทูุจ JWT Token
  - โ ูุชุทูุจ `role = 'admin'`
  - โ Rate Limiting (20 ุทูุจ/ุฏูููุฉ)
  - โ Input Validation (Zod schema)
  - โ Server-side verification

### 3. `/api/admin/verification/upload` (POST)
- **ุงููุตู:** ุฑูุน ูุงุฆูุฉ ุงูุทูุงุจ
- **ุงูุญูุงูุฉ:**
  - โ ูุชุทูุจ JWT Token
  - โ ูุชุทูุจ `role = 'admin'`
  - โ Rate Limiting
  - โ Input Validation
  - โ Server-side verification

---

## ๐ ุงูุจูุงูุงุช ุงููุญููุธุฉ

### ุฌุฏูู `verification_list`

ูู ุทุงูุจ ูุญุชูู ุนูู:

| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `full_name` | TEXT | ุงูุงุณู ุงููุงูู |
| `section_number` | INTEGER | ุฑูู ุงููุณู (1-15) |
| `group_name` | TEXT | ุงุณู ุงููุฌููุนุฉ (Group 1/Group 2) |
| `student_id` | TEXT | ุฑูู ุงูุทุงูุจ (ุงุฎุชูุงุฑู) |
| `email` | TEXT | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู) |
| `is_registered` | BOOLEAN | ุญุงูุฉ ุงูุชุณุฌูู |
| `registered_at` | TIMESTAMPTZ | ุชุงุฑูุฎ ุงูุชุณุฌูู |
| `registered_by` | UUID | ูุนุฑู ุงููุณุชุฎุฏู ุงูุฐู ุณุฌู |
| `created_at` | TIMESTAMPTZ | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | TIMESTAMPTZ | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |

---

## ๐ ููููุฉ ุงููุตูู ููุจูุงูุงุช

### ููู Admin:

#### 1. ุนุฑุถ ุฌููุน ุงูุทูุงุจ
- **URL:** `/admin/verification-list`
- **ุงููุตู:** ุตูุญุฉ ูุนุฑุถ ุฌููุน ุงูุทูุงุจ ุงูู 703 ูุน ุฅููุงููุฉ ุงูุจุญุซ ูุงูููุชุฑุฉ
- **ุงูููุฒุงุช:**
  - โ ุนุฑุถ ุฌููุน ุงูุทูุงุจ
  - โ ุงูุจุญุซ ุจุงูุงุณูุ ุฑูู ุงูุทุงูุจุ ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - โ ุงูููุชุฑุฉ ุญุณุจ ุงููุณูุ ุงููุฌููุนุฉุ ุฃู ุญุงูุฉ ุงูุชุณุฌูู
  - โ ุฅุญุตุงุฆูุงุช (ุฅุฌูุงููุ ูุณุฌูุ ุบูุฑ ูุณุฌู)

#### 2. ุชุนุฏูู ุจูุงูุงุช ุทุงูุจ
- **ูู ุตูุญุฉ:** `/admin/verification-list`
- **ุงูุฎุทูุงุช:**
  1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุนุฏูู (Edit) ุจุฌุงูุจ ุงูุทุงูุจ
  2. ุนุฏูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
  3. ุงุถุบุท Save ูุญูุธ ุงูุชุนุฏููุงุช
  4. ุฃู ุงุถุบุท X ูุฅูุบุงุก ุงูุชุนุฏูู

#### 3. ุฑูุน ูุงุฆูุฉ ุฌุฏูุฏุฉ
- **URL:** `/admin/verification`
- **ุงููุตู:** ุฑูุน ููู Excel/CSV ุจูุงุฆูุฉ ุงูุทูุงุจ
- **ููุงุญุธุฉ:** ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุชูุถุงู ููุจูุงูุงุช ุงูููุฌูุฏุฉ (ูุง ุชุญุฐู ุงููุฏููุฉ)

---

## ๐ซ ุงูุญูุงูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู

### 1. ููุน ุงููุตูู ุงููุจุงุดุฑ
- โ ูุง ูููู ุงููุตูู ููุจูุงูุงุช ูู Client-Side ูุจุงุดุฑุฉ
- โ ูุง ูููู ุงููุตูู ููุจูุงูุงุช ุจุฏูู JWT Token
- โ ูุง ูููู ุงููุตูู ููุจูุงูุงุช ุจุฏูู `role = 'admin'`

### 2. ููุน ุงูุชุนุฏูู ุงููุจุงุดุฑ
- โ ูุง ูููู ุชุนุฏูู ุงูุจูุงูุงุช ูู Client-Side ูุจุงุดุฑุฉ
- โ ูุง ูููู ุชุนุฏูู ุงูุจูุงูุงุช ุจุฏูู JWT Token
- โ ูุง ูููู ุชุนุฏูู ุงูุจูุงูุงุช ุจุฏูู `role = 'admin'`

### 3. ููุน ุงูุญุฐู
- โ ุงูุญุฐู ูุญุธูุฑ ุชูุงูุงู ูู RLS
- โ ูุง ููุฌุฏ API endpoint ููุญุฐู
- โ ุงูุจูุงูุงุช ูุญููุธุฉ ุฏุงุฆูุงู ุญุชู ูุชู ุชุนุฏูููุง

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุญูุธ ุงูุฏุงุฆู
- โ ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฏุงุฆู
- โ ุงูุจูุงูุงุช ูุง ุชูุญุฐู ุชููุงุฆูุงู
- โ ูููู ุชุนุฏูู ุงูุจูุงูุงุช ูู ุฃู ููุช ูู Admin

### 2. ุงููุณุฎ ุงูุงุญุชูุงุทู
- โ ุงูุจูุงูุงุช ูุญููุธุฉ ูู Supabase (ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู)
- โ ูููู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ูู ุฃู ููุช

### 3. ุงูุฃูุงู
- โ ุฌููุน ุงูุงุชุตุงูุงุช ูุดูุฑุฉ (HTTPS)
- โ JWT Tokens ูุญููุฉ
- โ Rate Limiting ูููุน ุงููุฌูุงุช
- โ Input Validation ูููุน ุงูุจูุงูุงุช ุงูุฎุงุทุฆุฉ

---

## ๐ฏ ุงูุงุณุชุฎุฏุงู

### ูููุตูู ููุงุฆูุฉ ุงูุทูุงุจ:

1. **ุณุฌูู ุงูุฏุฎูู ูู Admin:**
   - ุงุฐูุจ ุฅูู `/login`
   - ุฃุฏุฎู ุจูุงูุงุช Admin
   - ุณูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู `/admin`

2. **ูู ููุญุฉ ุงูุชุญูู:**
   - ุงุถุบุท "Manage Verification List"
   - ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู `/admin/verification-list`

3. **ุนุฑุถ ูุชุนุฏูู ุงูุจูุงูุงุช:**
   - ุงุณุชุฎุฏู ุงูุจุญุซ ููุนุซูุฑ ุนูู ุทุงูุจ ูุนูู
   - ุงุณุชุฎุฏู ุงูููุงุชุฑ ููููุชุฑุฉ ุญุณุจ ุงููุณู/ุงููุฌููุนุฉ
   - ุงุถุบุท Edit ูุชุนุฏูู ุจูุงูุงุช ุทุงูุจ
   - ุงุญูุธ ุงูุชุนุฏููุงุช

---

## โ ุงูุฎูุงุตุฉ

- โ **703 ุทุงูุจ** - ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ุจุดูู ุฏุงุฆู
- โ **ุญูุงูุฉ ูุงููุฉ** - ููุท Admin ููููู ุงููุตูู ูุงูุชุนุฏูู
- โ **ููุน ุงูุญุฐู** - ุงูุจูุงูุงุช ูุญููุฉ ูู ุงูุญุฐู
- โ **ุชุนุฏูู ุณูู** - ูุงุฌูุฉ ุณููุฉ ููุชุนุฏูู ูู Admin
- โ **ุฃูุงู ุนุงูู** - RLS + JWT + Rate Limiting + Input Validation

---

**ุขุฎุฑ ุชุญุฏูุซ:** $(date)
**ุงูุญุงูุฉ:** โ ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจุดูู ูุงูู

