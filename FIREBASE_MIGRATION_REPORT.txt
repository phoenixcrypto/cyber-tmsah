========================================
ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„: Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Prisma/SQL Ø¥Ù„Ù‰ Firebase
========================================

ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: Ø§Ù„Ø¢Ù†
Ø§Ù„Ø­Ø§Ù„Ø©: Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Prisma + PostgreSQL/Supabase
Ø§Ù„Ù‡Ø¯Ù: Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Firebase (Firestore + Firebase Auth)

========================================
Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹
========================================

Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØªØºÙŠÙŠØ±: 27 Ù…Ù„Ù
Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Prisma Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©: 76 Ø¹Ù…Ù„ÙŠØ©
API Routes: 20 Ù…Ù„Ù
Core Files: 7 Ù…Ù„ÙØ§Øª

========================================
1. Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Core Files) - ÙŠØ¬Ø¨ Ø­Ø°ÙÙ‡Ø§
========================================

âŒ ÙŠØ¬Ø¨ Ø­Ø°Ù:
- prisma/schema.prisma (ÙƒÙ„ Ø§Ù„Ù€ Models Ù‡Ù†Ø§)
- lib/db/prisma.ts (Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù€ Firebase Admin SDK)
- database/schema.sql (Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù‡)
- scripts/import-sql.ts (Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù‡)

âœ… ÙŠØ¬Ø¨ Ø¥Ù†Ø´Ø§Ø¡:
- lib/db/firebase.ts (Firebase Admin SDK setup)
- lib/db/collections.ts (ØªØ¹Ø±ÙŠÙ Collections ÙƒØ¨Ø¯ÙŠÙ„ Ù„Ù„Ù€ Models)

========================================
2. Authentication System - ØªØºÙŠÙŠØ± ÙƒØ§Ù…Ù„
========================================

ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØªØ£Ø«Ø±Ø©:

1. lib/middleware/auth.ts
   - Ø¥Ø²Ø§Ù„Ø©: prisma.user.findUnique()
   - Ø¥Ø¶Ø§ÙØ©: Firebase Admin Auth (getUserByEmail, getUser())
   - Ø§Ù„ØªØºÙŠÙŠØ±: JWT verification ÙŠØ¨Ù‚Ù‰ØŒ Ù„ÙƒÙ† user lookup Ù…Ù† Firebase

2. app/api/auth/login/route.ts
   - Ø¥Ø²Ø§Ù„Ø©: prisma.user.findUnique(), prisma.user.create(), prisma.user.count()
   - Ø¥Ø¶Ø§ÙØ©: Firebase Auth (signInWithEmailAndPassword) Ø£Ùˆ Custom Token
   - Ø¥Ø²Ø§Ù„Ø©: initializeDefaultAdmin() (Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù€ Firebase Admin creation)
   - Ø§Ù„ØªØºÙŠÙŠØ±: Password comparison Ù…Ù† bcrypt Ø¥Ù„Ù‰ Firebase Auth

3. app/api/auth/me/route.ts
   - Ø¥Ø²Ø§Ù„Ø©: prisma.user.findUnique()
   - Ø¥Ø¶Ø§ÙØ©: Firebase Auth getUser()
   - Ø§Ù„ØªØºÙŠÙŠØ±: User data Ù…Ù† Firebase Auth

4. app/api/auth/password-reset/route.ts
   - Ø¥Ø²Ø§Ù„Ø©: prisma.passwordResetToken (collection ÙƒØ§Ù…Ù„Ø©)
   - Ø¥Ø¶Ø§ÙØ©: Firebase Auth sendPasswordResetEmail() Ø£Ùˆ Firestore tokens collection

5. scripts/reset-admin.ts
   - Ø¥Ø²Ø§Ù„Ø©: PrismaClient
   - Ø¥Ø¶Ø§ÙØ©: Firebase Admin Auth createUser()

========================================
3. API Routes - Articles
========================================

ğŸ“ app/api/articles/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.article.findMany() â†’ Firestore collection('articles').get()
   - prisma.article.create() â†’ Firestore collection('articles').add()
   - prisma.material.findUnique() â†’ Firestore collection('materials').doc(id).get()
   - prisma.material.update() â†’ Firestore collection('materials').doc(id).update()
   - prisma.user.findUnique() â†’ Firebase Auth getUser()

ğŸ“ app/api/articles/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.article.findUnique() â†’ Firestore collection('articles').doc(id).get()
   - prisma.article.update() â†’ Firestore collection('articles').doc(id).update()
   - prisma.article.delete() â†’ Firestore collection('articles').doc(id).delete()
   - prisma.material.update() â†’ Firestore collection('materials').doc(id).update()

Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
- Articles Collection ÙÙŠ Firestore
- Material References â†’ subcollection Ø£Ùˆ field reference
- Tags (JSON) â†’ Array ÙÙŠ Firestore

========================================
4. API Routes - Materials
========================================

ğŸ“ app/api/materials/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.material.findMany() â†’ Firestore collection('materials').get()
   - prisma.material.create() â†’ Firestore collection('materials').add()

ğŸ“ app/api/materials/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.material.findUnique() â†’ Firestore collection('materials').doc(id).get()
   - prisma.material.update() â†’ Firestore collection('materials').doc(id).update()
   - prisma.material.delete() â†’ Firestore collection('materials').doc(id).delete()

Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
- Materials Collection
- articlesCount â†’ computed field Ø£Ùˆ aggregation query

========================================
5. API Routes - Schedule
========================================

ğŸ“ app/api/schedule/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.scheduleItem.findMany() â†’ Firestore collection('scheduleItems').get()
   - prisma.scheduleItem.create() â†’ Firestore collection('scheduleItems').add()

ğŸ“ app/api/schedule/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.scheduleItem.findUnique() â†’ Firestore collection('scheduleItems').doc(id).get()
   - prisma.scheduleItem.update() â†’ Firestore collection('scheduleItems').doc(id).update()
   - prisma.scheduleItem.delete() â†’ Firestore collection('scheduleItems').doc(id).delete()

ğŸ“ app/api/admin/schedule/[id]/route.ts
   Ù†ÙØ³ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª

Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
- ScheduleItems Collection
- Enum types (Group1/Group2, lecture/lab, days) â†’ strings ÙÙŠ Firestore
- Ordering â†’ Firestore orderBy()

========================================
6. API Routes - Downloads
========================================

ğŸ“ app/api/downloads/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.downloadSoftware.findMany() â†’ Firestore collection('downloads').get()
   - prisma.downloadSoftware.create() â†’ Firestore collection('downloads').add()

ğŸ“ app/api/downloads/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.downloadSoftware.findUnique() â†’ Firestore collection('downloads').doc(id).get()
   - prisma.downloadSoftware.update() â†’ Firestore collection('downloads').doc(id).update()
   - prisma.downloadSoftware.delete() â†’ Firestore collection('downloads').doc(id).delete()

========================================
7. API Routes - News
========================================

ğŸ“ app/api/news/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.newsArticle.findMany() â†’ Firestore collection('news').get()
   - prisma.newsArticle.create() â†’ Firestore collection('news').add()

ğŸ“ app/api/news/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.newsArticle.findUnique() â†’ Firestore collection('news').doc(id).get()
   - prisma.newsArticle.update() â†’ Firestore collection('news').doc(id).update()
   - prisma.newsArticle.delete() â†’ Firestore collection('news').doc(id).delete()

========================================
8. API Routes - Pages
========================================

ğŸ“ app/api/pages/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.page.findMany() â†’ Firestore collection('pages').get()
   - prisma.page.findUnique() â†’ Firestore collection('pages').where('slug', '==', slug).get()
   - prisma.page.create() â†’ Firestore collection('pages').add()

ğŸ“ app/api/pages/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.page.findFirst() â†’ Firestore query
   - prisma.page.update() â†’ Firestore update
   - prisma.page.delete() â†’ Firestore delete

========================================
9. API Routes - Admin Users
========================================

ğŸ“ app/api/admin/users/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.user.findMany() â†’ Firebase Admin Auth listUsers()
   - prisma.user.findUnique() â†’ Firebase Admin Auth getUserByEmail()
   - prisma.user.create() â†’ Firebase Admin Auth createUser()

ğŸ“ app/api/admin/users/[id]/route.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.user.findUnique() â†’ Firebase Admin Auth getUser()
   - prisma.user.update() â†’ Firebase Admin Auth updateUser()
   - prisma.user.delete() â†’ Firebase Admin Auth deleteUser()

Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:
- User roles â†’ Custom Claims ÙÙŠ Firebase Auth
- User metadata â†’ Firestore collection('users') Ø£Ùˆ Custom Claims

========================================
10. Logger System
========================================

ğŸ“ lib/utils/logger.ts
   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
   - prisma.apiLog.create() â†’ Firestore collection('apiLogs').add()

Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
- Ø¥Ø²Ø§Ù„Ø© Prisma
- Ø¥Ø¶Ø§ÙØ© Firestore logging

========================================
11. Scripts
========================================

ğŸ“ scripts/seed-database.ts
   - Ø¥Ø²Ø§Ù„Ø©: PrismaClient
   - Ø¥Ø¶Ø§ÙØ©: Firestore batch writes
   - ØªØºÙŠÙŠØ±: ÙƒÙ„ seed data Ø¥Ù„Ù‰ Firestore format

ğŸ“ scripts/reset-admin.ts
   - Ø¥Ø²Ø§Ù„Ø©: PrismaClient
   - Ø¥Ø¶Ø§ÙØ©: Firebase Admin Auth

ğŸ“ scripts/import-sql.ts
   - Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù (Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù‡)

========================================
12. Package.json
========================================

Ø¥Ø²Ø§Ù„Ø©:
- @prisma/client
- prisma

Ø¥Ø¶Ø§ÙØ©:
- firebase-admin
- firebase (optional Ù„Ù„Ù€ client-side)

Scripts Ù„Ù„ØªØºÙŠÙŠØ±:
- Ø­Ø°Ù: db:generate, db:push, db:migrate, db:studio, db:seed, db:import
- Ø¥Ø¶Ø§ÙØ©: firebase:init (Ø¥Ø°Ø§ Ù„Ø²Ù…)

========================================
13. Environment Variables
========================================

Ø¥Ø²Ø§Ù„Ø©:
- DATABASE_URL

Ø¥Ø¶Ø§ÙØ©:
- FIREBASE_PROJECT_ID
- FIREBASE_CLIENT_EMAIL
- FIREBASE_PRIVATE_KEY
- (Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… service account JSON file)

========================================
14. Data Structure Changes
========================================

SQL Tables â†’ Firestore Collections:
- users â†’ Firebase Auth + Firestore 'users' (Ù„Ù„Ù€ metadata)
- articles â†’ 'articles' collection
- materials â†’ 'materials' collection
- schedule_items â†’ 'scheduleItems' collection
- download_software â†’ 'downloads' collection
- news_articles â†’ 'news' collection
- pages â†’ 'pages' collection
- password_reset_tokens â†’ 'passwordResetTokens' collection (Ø£Ùˆ Firebase Auth)
- api_logs â†’ 'apiLogs' collection

Relationships:
- SQL Foreign Keys â†’ Firestore References Ø£Ùˆ Nested Data
- Article.materialId â†’ article.materialRef (DocumentReference)
- Material.articles â†’ subcollection Ø£Ùˆ array of IDs

Enums:
- UserRole, ArticleStatus, etc. â†’ Strings ÙÙŠ Firestore

Timestamps:
- createdAt, updatedAt â†’ Firestore serverTimestamp()

IDs:
- cuid() â†’ Firestore auto-generated IDs Ø£Ùˆ custom IDs

========================================
15. Query Changes
========================================

Prisma â†’ Firestore:

findMany() â†’ collection().get()
findUnique() â†’ doc().get() Ø£Ùˆ where().limit(1).get()
findFirst() â†’ where().limit(1).get()
create() â†’ add() Ø£Ùˆ doc().set()
update() â†’ update()
delete() â†’ delete()
count() â†’ get() Ø«Ù… .size
include â†’ get() Ø«Ù… fetch related documents
orderBy â†’ orderBy()
where â†’ where()

Complex Queries:
- Multiple where conditions â†’ Multiple where() calls
- OR conditions â†’ Firestore OR queries (limited)
- Aggregations â†’ Cloud Functions Ø£Ùˆ client-side

========================================
16. Authentication Flow Changes
========================================

Ø§Ù„Ø­Ø§Ù„ÙŠ (Custom JWT):
1. User login â†’ Prisma find user â†’ bcrypt compare â†’ JWT token

Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Firebase):
1. Option A: Firebase Auth (signInWithEmailAndPassword)
   - Frontend: Firebase SDK
   - Backend: Verify ID token

2. Option B: Custom Auth Ù…Ø¹ Firebase
   - Custom login â†’ Firebase Admin createCustomToken()
   - Frontend: signInWithCustomToken()

User Roles:
- Custom Claims ÙÙŠ Firebase Auth tokens
- Ø£Ùˆ Firestore 'users' collection Ù„Ù„Ù€ roles

========================================
17. Ù…Ù„Ø®Øµ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
========================================

Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„Ø­Ø°Ù: 4
Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„: 20
Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø²Ø¦ÙŠ: 7
Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: 2-3

Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: 4-6 Ø³Ø§Ø¹Ø§Øª

========================================
18. Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
========================================

1. Setup Firebase Project
   - Ø¥Ù†Ø´Ø§Ø¡ Firebase project
   - ØªÙØ¹ÙŠÙ„ Authentication
   - ØªÙØ¹ÙŠÙ„ Firestore
   - Ø¥Ù†Ø´Ø§Ø¡ Service Account

2. Setup Firebase Admin SDK
   - Install firebase-admin
   - Ø¥Ù†Ø´Ø§Ø¡ lib/db/firebase.ts
   - Ø¥Ø¹Ø¯Ø§Ø¯ Environment Variables

3. ØªØ­ÙˆÙŠÙ„ Authentication
   - ØªØ¹Ø¯ÙŠÙ„ auth middleware
   - ØªØ¹Ø¯ÙŠÙ„ login route
   - ØªØ¹Ø¯ÙŠÙ„ user management

4. ØªØ­ÙˆÙŠÙ„ Collections ÙˆØ§Ø­Ø¯Ø© ØªÙ„Ùˆ Ø§Ù„Ø£Ø®Ø±Ù‰
   - Materials
   - Articles
   - Schedule
   - Downloads
   - News
   - Pages

5. ØªØ­ÙˆÙŠÙ„ Logger
6. Ø­Ø°Ù Prisma dependencies
7. Testing
8. Migration Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø¥Ø°Ø§ Ù„Ø²Ù…)

========================================
19. ØªØ­Ø¯ÙŠØ§Øª Ù…ØªÙˆÙ‚Ø¹Ø©
========================================

1. NoSQL vs SQL mindset
   - No joins â†’ Multiple queries
   - No transactions (Ù…Ø­Ø¯ÙˆØ¯Ø©) â†’ Batch writes

2. Queries
   - Complex queries Ø£ØµØ¹Ø¨
   - Indexing Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ù€ queries Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©

3. Relations
   - Foreign keys â†’ References Ø£Ùˆ nested data
   - Cascading deletes â†’ Cloud Functions

4. Real-time (Ø¥ÙŠØ¬Ø§Ø¨ÙŠ!)
   - Firestore real-time listeners
   - Live updates Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª

========================================
20. Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ø§Ù„ØªÙØµÙŠÙ„
========================================

âŒ Ø­Ø°Ù:
1. prisma/schema.prisma
2. lib/db/prisma.ts
3. database/schema.sql
4. scripts/import-sql.ts

ğŸ”„ ØªØ¹Ø¯ÙŠÙ„ ÙƒØ§Ù…Ù„:
1. lib/middleware/auth.ts
2. lib/utils/logger.ts
3. app/api/auth/login/route.ts
4. app/api/auth/me/route.ts
5. app/api/auth/password-reset/route.ts
6. app/api/articles/route.ts
7. app/api/articles/[id]/route.ts
8. app/api/materials/route.ts
9. app/api/materials/[id]/route.ts
10. app/api/schedule/route.ts
11. app/api/schedule/[id]/route.ts
12. app/api/admin/schedule/[id]/route.ts
13. app/api/downloads/route.ts
14. app/api/downloads/[id]/route.ts
15. app/api/news/route.ts
16. app/api/news/[id]/route.ts
17. app/api/pages/route.ts
18. app/api/pages/[id]/route.ts
19. app/api/admin/users/route.ts
20. app/api/admin/users/[id]/route.ts
21. scripts/reset-admin.ts
22. scripts/seed-database.ts

âœ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯:
1. lib/db/firebase.ts (Firebase Admin setup)
2. lib/db/collections.ts (Collection helpers - optional)
3. lib/types/firebase.ts (Firebase types - optional)

ğŸ“ ØªØ¹Ø¯ÙŠÙ„ Ø¬Ø²Ø¦ÙŠ:
1. package.json
2. next.config.js (Ù‚Ø¯ ÙŠØ­ØªØ§Ø¬ Firebase config)
3. .env.example (Ø¥Ø¶Ø§ÙØ© Firebase vars)

========================================
Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
========================================

